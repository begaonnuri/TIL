## 도메인 모델

#### Member와 Order

회원이 항상 주문을 한다고 생각하면 안된다. 주문 내역을 확인할때 Member를 통해 Order 리스트를 조회하는 것이 아니라, Order를 조회할 때 필터링으로 Member를 걸어서 조회한다.

일대다 관계에선 항상 외래키가 있는 다 쪽이 연관관계의 주인이기 때문에 Orders가 연관관계의 주인이다.



#### Orders와 Item

다대다 연관관계이지만 OrderItem을 두어서 일대다와 다대일 연관관계로 풀어냈다. 또한 이렇게 하는 이유가 가격과 수량(orderPrice, count)를 두어서 파악할 수 있기 때문이다.



#### OrderItem과 Item

Item에선 OrderItem을 알 필요가 없다. 그렇기 때문에 OrderItem에서 Item으로 다대일 단방향 연관관계를 설정한다.



#### Orders와 Delivery

일대일 단방향 관계에선 외래키를 어디에 둬도 상관이 없다. 외래키를 둔 쪽이 연관관계의 주인이다.



#### Category와 Item

다대다 연관관계이지만 예제용이므로 실무에선 다대다를 사용하지 않는다.



## 테이블 설계

#### Item

Item에선 상속 관계 매핑 중 Single Table 전략을 사용했다. 한 테이블에 모든 컬럼이 들어가지만 일반적으로 성능상 이점이 있다.



#### Category와 Item

객체에선 다대다 관계가 가능하지만 테이블에선 다대다 관계를 표현할 수 없다. CATEGORY_ITEM 매핑 테이블을 두어서 다대다 관계를 일대다와 다대일 관계로 풀어냈다.