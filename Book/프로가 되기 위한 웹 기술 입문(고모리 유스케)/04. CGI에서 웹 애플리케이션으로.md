#### 리다이렉트

302 Found코드는 응답 메시지 헤더의 `Location`에 표시된 URL로 다시 요청한다. 이것처럼 처음 요청한 URL과 다른 URL로 요청하는 것을 **리다이렉트(redirect)** 라고 한다.

## CGI와 모듈의 차이

웹 서버인 아파치는 HTTP 요청을 받으면 자신에게 등록된 모듈에서 요청을 처리하게 한다. 아파치의 php 모듈은 php파일을 실행해 응답으로 돌려준다. CGI를 통한 프로그램 호출과 달리 웹 서버 프로세스 안에서 진행되기 때문에 빠르게 작동한다.

CGI는 대부분의 웹 서버에서 이용할 수 있지만, 모듈 방식은 각 웹 서버 제품에 대응하는 모듈이 필요하다.

## 상태 프로토콜

#### 상태 유지 프로토콜

FTP는 앞선 요청을 기억하고 있으면서 그것을 바탕으로 다음 요청을 실행한다. FTP는 상태를 가지는 요청, 즉 **상태 유지 프로토콜(Stateful Protocol)** 이라 한다.

#### 무상태 프로토콜

반면 HTTP는 상태를 가지지 않는 **무상태 프로토콜(Stateless Protocol)** 이다. HTTP는 한 번의 요청만으로 용건이 해결되므로 FTP처럼 통신 절차가 필요 없다.

#### 무상태 프로토콜의 탄생

FTP는 통신절차가 많아 오버헤드가 크고, 접속을 위해 인증이 필요하다. 따라서 접속한 곳의 서버 관리자에게 계정을 발급받아아 한다.

WWW가 탄생했을 때 FTP가 이미 있었지만 위와 같은 이유로 인증이 필요 없고, 오버헤드가 적으며 탑재가 간단한 HTTP가 등장한 것이다.

## HTTP에서 상태 유지

#### GET

쿼리 문자열로 상태를 전달하면 다른 사람도 쿼리 문자열을 조작해 접근할 수 있어서 적절하지 않다.

#### POST

이동 전의 페이지에서 반드시 form을 포함해야 하기 때문에 적절하지 않다.

그렇게 해서 **쿠키** 가 탄생했다.

## 쿠키

HTTP의 규격을 확장해 웹 애플리케이션과 웹 브라우저 사이에서 정보를 교환할 수 있게 한 것이다. 상태를 **클라이언트가** 갖고 있는다.

1. 웹 서버는 웹 클라이언트에게 HTTP 응답 헤더를 통해 정보를 보낸다.
(Set-Cookie: name=value)
2. 웹 클라이언트는 다음에 접속할 때 HTTP 요청 헤더에 쿠키 정보를 포함해서 보낸다.
(Cookie: name=value; name=value)
3. 웹 서버는 요청 헤더의 쿠키를 조사해 상대를 알 수 있다.

하지만 쿠키는 정보량에 제한이 있고, 제 3자에게 내용이 노출될 수 있다.

## 세션

고객 관리표처럼 클라이언트의 상태를 **서버가** 기록해서 갖고있는다. 웹 서버와 웹 클라이언트는 쿠키에 세션을 식별할 수 있는 세션ID만 담아서 주고 받는다.

1. 최초 로그인시 서버는 세션ID를 발급하고 세션 정보에 로그인중인 아이디를 기록한다.

2. 쿠키에 세션ID를 저장해 클라이언트에게 돌려준다.

3. 클라이언트는 요청할 때 세션ID를 저장한 쿠키를 전달한다.

4. 서버는 세션ID를 통해 로그인중인 아이디를 식별한다.
