## 탐험 여행은 URL 입력부터 시작한다

**URL**(Uniform Resource Locator)은 http:로 시작하는 것, ftp:로 시작 하는 것, file:로 시작하는 것, mailto:로 시작하는 것 등 여러가지가 있다. 이것은 **액세스 하는 방법**을 나타낸다. http:같이 프로토콜이 올 수도 있지만 file:처럼 네트워크를 사용하지 않는 것이 올 수도 있다.



## 브라우저는 먼저 URL을 해독한다

브라우저는 웹 서버에 리퀘스트 메시지를 작성하기 위해 URL을 해독한다.

ex) `http://www.lab.cyber.co.kr/dir1/file1.html`

1. `http:`,  `//`, `www.lab.cyber.co.kr`, `/`, `dir1`, `/`, `file1.html` 처럼 요소를 분해한다.
2. 요소의 의미에 맞춰서 해독한다.
   웹 서버명 : `www.lab.cyber.co.kr`
   데이터 출처의 경로명 : `/dir1/file1.html`

위 경우 `www.lab.cyber.co.kr`에 있는 `/dir1/` 디렉토리 아래에 있는 `file1.html` 파일에 액세스한다는 의미이다.



## 파일명을 생략한 경우

#### `http://www.lab.cyber.co.kr/dir/`

`/dir/` 다음에 올 파일명을 생략한다는 것이다. 파일명을 쓰지 않는 경우 `/dir/index.html` 또는 `/dir/default.htm` 이라는 파일에 액세스한다.

#### `http://www.lab.cyber.co.kr/`

`/`는 **루트 디렉토리**를 의미한다. 이 경우 `/index.html` 또는 `/default.htm` 이라는 파일에 액세스한다.

#### `http://www.lab.cyber.co.kr`

이 경우도 `/index.html` 또는 `/default.htm` 이라는 파일에 액세스한다. 이렇게 파일명을 생략했을 때 디폴트 페이지를 **홈페이지**라고 한다. 지금은 의미가 확장되어 모든 페이지를 홈페이지라고 한다.

#### `http://www.lab.cyber.co.kr/whatisthis`

맨 끝에 `/`가 없으므로 파일명으로 보는 것이 맞다. 하지만 이 경우 whatisthis라는 파일이 있으면 파일명으로 보고 whatisthis라는 디렉토리가 있으면 디렉토리명으로 본다.



## HTTP의 기본 개념

HTTP 프로토콜은 클라이언트와 서버가 주고받는 메시지의 내용이나 순서를 정한 것이다.

클라이언트는 서버에게 리퀘스트 메시지를 보내는데, **무엇을**, **어떻게 해서** 하겠다는 내용이 담겨 있다. **무엇을**에 해당하는 것을 **URI**(Unifrom Resource Identifier)라고 하는데, 페이지 데이터를 저장한 파일의 이름이나 **CGI 프로그램**의 파일명을 URI로 쓴다. URI는 파일 이름 뿐만 아니라 http:로 시작하는 URL을 모두 사용하기도 한다.

> CGI 프로그램 : 웹 서버 소프트웨어에서 프로그램을 호출할 때의 규칙을 정한 것

**어떻게 해서**에 해당하는 것은 **메소드**로, 웹 서버에 어떤 동작을 하고 싶은지를 전달한다.

#### HTTP의 주요 메소드

- GET : URI로 지정한 정보를 도출한다. 파일의 경우 파일의 내용을 응답하고, CGI 프로그램의 경우 프로그램의 출력 데이터를 응답한다.
- POST : 클라이언트에서 서버로 데이터를 송신한다. 폼에 입력한 데이터를 송신할 때 사용한다.
- HEAD : GET과 같지만 HTTP 메시지 헤더만 응답한다. 파일의 최종 갱신 일시같은 정보를 조사할 때 사용한다.
- OPTIONS : 통신 옵션을 통지하거나 조사할때 사용한다.
- PUT : URI로 지정한 서버의 파일을 치환한다. 지정한 파일이 없는 경우 새로 작성한다.
- DELETE : URI로 지정한 서버의 파일을 삭제한다.
- TRACE : 서버에서 받은 리퀘스트 라인과 헤더를 그대로 클라이언트에 응답한다. 프록시 서버같은 환경에서 리퀘스트가 치환되는 상태를 조사할 때 사용한다.
- CONNECT : 암호화한 메시지를 프록시로 전송할 때 사용한다.

웹 서버는 리퀘스트 메시지를 받고 무엇을 어떻게 하는지 판단한 후 동작하고 결과 데이터를 응답 메시지에 저장한다. 응답 메시지 맨 앞에는 결과를 나타내는 **스테이터스 코드**가 있다.



## HTTP 리퀘스트 메시지를 만든다

URL을 해독해 웹 서버와 파일명을 판단하면 브라우저는 HTTP 리퀘스트 메시지를 만든다. 

#### 리퀘스트 메시지의 포맷

- 리퀘스트 라인 : 리퀘스트 메시지의 첫 라인. `메소드`, `URI`, `HTTP 버전`으로 이루어져있다.
- 메시지 헤더 : 리퀘스트 메시지의 두번째 라인 부터 헤더이다. `필드명:필드값` 형식으로 헤더 필드를 보여준다.
- 메시지 본문 : 메시지 헤더가 끝나고 하나의 공백 행 이후 메시지 본문이다. 클라이언트에서 서버에 송신하는 데이터가 있다.



## 리퀘스트 메시지를 보내면 응답이 되돌아온다

응답 메시지의 포맷도 기본적으로 리퀘스트 메시지와 같지만 첫 번째 행이 다르다. 첫 번째 행엔 실행 결과를 나타내는 스테이터스 코드와 응답 문구가 들어간다. 둘 다 의미는 같지만 용도가 다르다. 스테이터스 코드는 프로그램에 결과를 알려주는 것이 목적이고, 응답 문구는 사람에게 실행 결과를 알리는 것이 목적이다.

#### HTTP의 스테이터스 코드 개요

- 1xx : 처리 경과 상황을 통지한다.
- 2xx : 정상 종료
- 3xx : 무언가 다른 조치가 필요함
- 4xx : 클라이언트측의 오류
- 5xx : 서버측의 오류

응답 메시지가 되돌아오면 데이터를 추출한 후 화면에 표시해서 웹 페이지를 볼 수 있다. 페이지가 텍스트인 경우 그걸로 끝이지만 미디어를 포함한 경우 태그라는 제어 정보가 포함되어 있어서 태그를 탐색한다. 태그를 만나면 공백으로 비워둔 후 표시해 나간 뒤 다시 한번 웹 서버에 접근해서 미디어를 가져와 비워뒀던 공백에 표시한다.

리퀘스트 메시지에 URI는 한 개만 요청할 수 있다. 따라서 한 문장에 3개의 영상이 포함되어있다면 총 4번 리퀘스트 메시지를 보내야 한다.

